= Swagger2Markup Demo
:author: Robert Winkler
:version: 0.1.0
:hardbreaks:
== Overview

This project is a https://github.com/RobWin/swagger2markup[Swagger2Markup] (AsciiDoc and Markdown) converter demo using https://github.com/spring-projects/spring-boot[Spring Boot], https://github.com/springfox/springfox[springfox] and https://github.com/spring-projects/spring-restdocs[spring-restdocs].
The demo shows how you can generate static docs (HTML5 and PDF) with https://github.com/RobWin/swagger2markup[Swagger2Markup] and serve them in a Spring Boot app under http://localhost:9080/docs/index.html and http://localhost:9080/docs/index.pdf.

== Demo

[source,java]
----
@WebAppConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = Application.class, loader = SpringApplicationContextLoader.class)
public class CreateAsciiDoc {

    private static final Logger LOG = LoggerFactory.getLogger(CreateAsciiDoc.class);

    @Autowired
    private WebApplicationContext context;

    private MockMvc mockMvc;

    @Before
    public void setUp() {
        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.context)
                .apply(new RestDocumentationConfigurer()).build();
    }

    @Test
    public void createAsciiDoc() throws Exception {
        this.mockMvc.perform(get("/v2/api-docs")
                .accept(MediaType.APPLICATION_JSON))
                .andDo(document("get_swagger_doc"))
                .andDo(Swagger2MarkupDocumentation.document("swagger_adoc"))
                .andExpect(status().isOk());
    }

}
----

[source,java]
----
@SpringBootApplication
@EnableSwagger2
public class Application {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    @Bean
    public Docket spicaRestApi() {
        return new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(spicaApiInfo())
                .select()
                .paths(ant("/api/**"))
                .build();
    }

    private ApiInfo spicaApiInfo() {
        return new ApiInfoBuilder()
                .title("Petstore API Title")
                .description("Petstore API Description")
                .contact("Petstore API Contact Email")
                .version("1.0.0")
                .build();
    }
}
----
